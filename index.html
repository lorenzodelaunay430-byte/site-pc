<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Montage PC ‚Äî Lorenzo (configurateur avanc√©)</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
<style>
  :root{--accent:#0b5ed7;--accent2:#ff6b00}
  *{box-sizing:border-box}
  body{
    margin:0;font-family:"Montserrat",system-ui,Arial,sans-serif;color:#fff;
    background:url("https://www.meteris.fr/wp-content/uploads/2015/08/montage-pc.jpg") center/cover no-repeat fixed;
    overflow-x:hidden;
  }
  header{padding:26px 18px;text-align:center;background:linear-gradient(rgba(0,0,0,.45),rgba(0,0,0,.25));position:relative}
  header h1{margin:0;font-size:28px}
  header p{margin:6px 0 0;color:rgba(255,255,255,.9)}
  main{max-width:1100px;margin:28px auto;padding:0 16px}
  section{background:rgba(0,0,0,.6);padding:18px;border-radius:10px;margin-bottom:20px}
  .row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
  .btn{display:inline-block;padding:10px 14px;border-radius:8px;background:var(--accent);color:#fff;text-decoration:none;border:none;cursor:pointer}
  .btn.alt{background:var(--accent2)}
  input,select{padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,.12);background:rgba(0,0,0,.35);color:#fff}
  .small{font-size:.9rem;color:#ddd}
  #configBtn{position:fixed;top:18px;right:120px;z-index:1300;padding:10px 12px;border-radius:8px;background:var(--accent2);border:none;color:white;cursor:pointer;box-shadow:0 6px 18px rgba(0,0,0,.4)}
  #priceBtn{position:fixed;top:18px;right:18px;z-index:1300;padding:10px 12px;border-radius:8px;background:#1a73e8;border:none;color:white;cursor:pointer;box-shadow:0 6px 18px rgba(0,0,0,.4)}
  /* modal configurateur */
  #configModal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.86);z-index:1500;align-items:center;justify-content:center;padding:20px}
  #configBox{width:1000px;max-width:100%;background:linear-gradient(180deg,#0f0f0f,#070707);padding:16px;border-radius:12px;color:#fff;display:grid;grid-template-columns:1fr 340px;gap:12px}
  #left{padding:6px}
  #right{padding:6px}
  h3{margin:6px 0 10px}
  .component-row{display:flex;gap:8px;align-items:center;margin-bottom:8px}
  .component-card{display:flex;gap:10px;align-items:center;background:rgba(255,255,255,.02);padding:8px;border-radius:8px}
  .component-card img{width:72px;height:48px;object-fit:cover;border-radius:6px;flex-shrink:0}
  .component-meta{font-size:14px;text-align:left}
  .result{margin-top:10px;padding:10px;border-radius:8px}
  .ok{background:rgba(0,128,0,.12);color:#bff0b8}
  .ko{background:rgba(200,0,0,.12);color:#ffc0c0}
  .summary{background:rgba(255,255,255,.03);padding:10px;border-radius:8px;margin-top:10px}
  .price{font-weight:700;font-size:1.1rem}
  .cart-list{max-height:300px;overflow:auto;margin-top:8px}
  /* price modal */
  #priceModal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.86);z-index:1500;align-items:center;justify-content:center;padding:20px}
  #priceBox{width:900px;max-width:100%;background:#111;padding:16px;border-radius:10px}
  .price-row{display:flex;align-items:center;justify-content:space-between;padding:8px;border-bottom:1px solid rgba(255,255,255,.04)}
  .source-sim{font-size:.85rem;color:#ffd88a}
  /* pumpkins */
  .pumpkin{position:fixed;top:-100px;pointer-events:none;z-index:1400;user-select:none;transform-origin:center}
  @keyframes fall{to{transform:translateY(120vh) rotate(360deg);opacity:0}}
  /* anim entrance */
  body{opacity:0;animation:pageIn 1.2s ease-in forwards}
  @keyframes pageIn{from{opacity:0}to{opacity:1}}
  @media(max-width:980px){#configBox{grid-template-columns:1fr;max-height:90vh;overflow:auto}}
</style>
</head>
<body>
<header>
  <h1>Montage PC par Lorenzo</h1>
  <p>Num√©ro : 07 63 12 26 70</p>
</header>

<!-- boutons fixes -->
<button id="configBtn" title="Ouvrir le configurateur">‚öôÔ∏è Configurateur</button>
<button id="priceBtn" title="Afficher les prix du moment">üí∏ Prix du moment</button>

<main>
  <section>
    <h2>Pr√©sentation</h2>
    <p class="small">Je m'appelle <strong>Lorenzo</strong>, j'ai <strong>15 ans</strong>. J'ai commenc√© √† me passionner pour l'informatique √† 13 ans et j'ai appris √† monter des ordinateurs en aidant des amis et en construisant mon propre PC. Aujourd'hui je propose mes services de montage et d'assistance.</p>
  </section>

  <section>
    <h2>Tarifs rapide</h2>
    <div class="row">
      <label class="small">Composants</label>
      <input id="quick-components" type="number" min="1" placeholder="Ex: 6" style="width:120px">
      <label class="small">Heures</label>
      <input id="quick-hours" type="number" min="0.5" step="0.5" placeholder="Ex: 1.5" style="width:120px">
      <button class="btn" onclick="quickCalc()">Calculer</button>
      <div id="quick-result" style="margin-left:12px;font-weight:700"></div>
    </div>
  </section>

  <section>
    <h2>Zone d'intervention</h2>
    <p class="small">Je peux me d√©placer jusqu'√† 20 km autour de <strong>Gamaches</strong>.</p>
    <img src="https://woody.cloudly.space/app/uploads/crt-hautsdefrance/2021/01/thumbs/departement-somme-640x480.png" alt="Zone" style="max-width:360px">
  </section>
</main>

<!-- CONFIG MODAL -->
<div id="configModal">
  <div id="configBox" role="dialog" aria-modal="true">
    <div id="left">
      <h3>üîß Choisis tes composants</h3>

      <div class="component-row">
        <div style="flex:1">
          <label class="small">Processeur (CPU)</label><br>
          <select id="sel-cpu"></select>
        </div>
        <div style="width:120px">
          <label class="small">Quantit√©</label><br>
          <input id="cpu-qty" type="number" min="1" value="1" style="width:100%">
        </div>
      </div>

      <div class="component-row">
        <div style="flex:1">
          <label class="small">Carte m√®re (MB)</label><br>
          <select id="sel-mb"></select>
        </div>
        <div style="width:120px">
          <label class="small">Quantit√©</label><br>
          <input id="mb-qty" type="number" min="1" value="1" style="width:100%">
        </div>
      </div>

      <div class="component-row">
        <div style="flex:1">
          <label class="small">RAM</label><br>
          <select id="sel-ram"></select>
        </div>
        <div style="width:120px">
          <label class="small">Quantit√© (kit)</label><br>
          <input id="ram-qty" type="number" min="1" value="1" style="width:100%">
        </div>
      </div>

      <div class="component-row">
        <div style="flex:1">
          <label class="small">Carte graphique (GPU)</label><br>
          <select id="sel-gpu"></select>
        </div>
        <div style="width:120px">
          <label class="small">Quantit√©</label><br>
          <input id="gpu-qty" type="number" min="1" value="1" style="width:100%">
        </div>
      </div>

      <div style="margin-top:8px">
        <label class="small">Stockage (optionnel)</label><br>
        <select id="sel-storage">
          <option value="">-- Aucun --</option>
          <option value="ssd-500">SSD 500GB ‚Äî 50 ‚Ç¨</option>
          <option value="ssd-1t">SSD 1TB ‚Äî 90 ‚Ç¨</option>
          <option value="hdd-2t">HDD 2TB ‚Äî 60 ‚Ç¨</option>
        </select>
      </div>

      <div style="margin-top:12px" class="row">
        <button class="btn" onclick="verifyAll()">‚úÖ V√©rifier compatibilit√©</button>
        <button class="btn alt" onclick="addToCart()">‚ûï Ajouter au panier</button>
      </div>

      <div id="messages" style="margin-top:12px"></div>
    </div>

    <div id="right">
      <h3>R√©capitulatif & Estimation</h3>
      <div id="preview"><p class="small">S√©lectionne des composants pour voir l'aper√ßu avec images et prix.</p></div>

      <div class="summary" id="summaryBox">
        <div>Prix composants : <span id="priceSum">0 ‚Ç¨</span></div>
        <div>Est. alimentation recommand√©e : <span id="psuEst">‚Äî W</span></div>
        <div style="margin-top:8px" id="compatShort"></div>
      </div>

      <div style="margin-top:10px">
        <h3>Panier (d√©mo)</h3>
        <div class="cart-list" id="cartList"><p class="small">Aucun √©l√©ment</p></div>
      </div>

      <div style="margin-top:12px">
        <button id="closeConfig" class="btn alt" style="width:100%">Fermer</button>
      </div>
    </div>
  </div>
</div>

<!-- PRICE MODAL (Prix du moment ‚Äî simulation) -->
<div id="priceModal">
  <div id="priceBox">
    <h3>üí∏ Prix du moment (simulation / Amazon)</h3>
    <p class="small">Ce module peut √™tre reli√© √† l'API Amazon Product Advertising pour r√©cup√©rer les prix r√©els. Pour l'instant : simulation + donn√©es d'exemple.</p>
    <div style="margin-top:10px">
      <button class="btn" onclick="fetchLivePrices()">Rafra√Æchir les prix</button>
      <button class="btn alt" onclick="closePrice()" style="margin-left:8px">Fermer</button>
    </div>

    <div id="priceResults" style="margin-top:12px"></div>
    <p class="small" style="margin-top:10px">Note : l'int√©gration Amazon n√©cessite cl√© + endpoint c√¥t√© serveur (voir commentaire dans le code).</p>
  </div>
</div>

<script>
/* =========================
   Donn√©es composants (exemples)
   ========================= */
const CPUS = [
  {id:'intel-12400', name:'Intel Core i5-12400', brand:'Intel', socket:'LGA1700', ram:'DDR4', price:160, img:'https://via.placeholder.com/160x90.png?text=i5-12400', tdp:65},
  {id:'intel-13600k', name:'Intel Core i5-13600K', brand:'Intel', socket:'LGA1700', ram:'DDR5', price:340, img:'https://via.placeholder.com/160x90.png?text=i5-13600K', tdp:125},
  {id:'amd-5600', name:'AMD Ryzen 5 5600', brand:'AMD', socket:'AM4', ram:'DDR4', price:140, img:'https://via.placeholder.com/160x90.png?text=Ryzen+5+5600', tdp:65},
  {id:'amd-7700x', name:'AMD Ryzen 7 7700X', brand:'AMD', socket:'AM5', ram:'DDR5', price:420, img:'https://via.placeholder.com/160x90.png?text=Ryzen+7+7700X', tdp:105}
];

const MOTHERBOARDS = [
  {id:'b660-ddr4', name:'ASUS B660 (LGA1700, DDR4)', brand:'ASUS', socket:'LGA1700', ram:'DDR4', price:120, img:'https://via.placeholder.com/160x90.png?text=B660+DDR4'},
  {id:'z690-ddr5', name:'MSI Z690 (LGA1700, DDR5)', brand:'MSI', socket:'LGA1700', ram:'DDR5', price:250, img:'https://via.placeholder.com/160x90.png?text=Z690+DDR5'},
  {id:'b550-ddr4', name:'Gigabyte B550 (AM4, DDR4)', brand:'Gigabyte', socket:'AM4', ram:'DDR4', price:130, img:'https://via.placeholder.com/160x90.png?text=B550'},
  {id:'x570-ddr4', name:'ASRock X570 (AM4, DDR4)', brand:'ASRock', socket:'AM4', ram:'DDR4', price:220, img:'https://via.placeholder.com/160x90.png?text=X570'},
  {id:'x670-ddr5', name:'MSI X670 (AM5, DDR5)', brand:'MSI', socket:'AM5', ram:'DDR5', price:280, img:'https://via.placeholder.com/160x90.png?text=X670'}
];

const RAMS = [
  {id:'kingston-ddr4-16', name:'Kingston 16GB DDR4', brand:'Kingston', type:'DDR4', price:45, img:'https://via.placeholder.com/160x90.png?text=Kingston+16GB'},
  {id:'corsair-ddr4-32', name:'Corsair 32GB DDR4', brand:'Corsair', type:'DDR4', price:85, img:'https://via.placeholder.com/160x90.png?text=Corsair+32GB'},
  {id:'corsair-ddr5-32', name:'Corsair 32GB DDR5', brand:'Corsair', type:'DDR5', price:160, img:'https://via.placeholder.com/160x90.png?text=Corsair+DDR5+32GB'},
  {id:'gskill-ddr5-16', name:'G.Skill 16GB DDR5', brand:'G.Skill', type:'DDR5', price:95, img:'https://via.placeholder.com/160x90.png?text=GSkill+16GB'}
];

const GPUS = [
  {id:'rtx3060', name:'NVIDIA RTX 3060', brand:'NVIDIA', price:330, img:'https://via.placeholder.com/160x90.png?text=RTX+3060', tdp:170},
  {id:'rtx4070', name:'NVIDIA RTX 4070', brand:'NVIDIA', price:650, img:'https://via.placeholder.com/160x90.png?text=RTX+4070', tdp:200},
  {id:'rx6600', name:'AMD RX 6600', brand:'AMD', price:220, img:'https://via.placeholder.com/160x90.png?text=RX+6600', tdp:132},
  {id:'rx6800', name:'AMD RX 6800', brand:'AMD', price:580, img:'https://via.placeholder.com/160x90.png?text=RX+6800', tdp:250}
];

/* ========== helpers ========== */
function populateSelect(sel, items, placeholder){
  sel.innerHTML = `<option value="">${placeholder}</option>`;
  items.forEach(it=>{
    const opt = document.createElement('option');
    opt.value = it.id;
    opt.textContent = `${it.name} ‚Äî ${it.price} ‚Ç¨`;
    sel.appendChild(opt);
  });
}
function findById(list,id){ return list.find(x=>x.id===id) }

/* ========== DOM refs ========== */
const selCpu = document.getElementById('sel-cpu');
const selMb = document.getElementById('sel-mb');
const selRam = document.getElementById('sel-ram');
const selGpu = document.getElementById('sel-gpu');
const selStorage = document.getElementById('sel-storage');
const configBtn = document.getElementById('configBtn');
const configModal = document.getElementById('configModal');
const closeConfig = document.getElementById('closeConfig');
const messages = document.getElementById('messages');
const preview = document.getElementById('preview');
const priceSum = document.getElementById('priceSum');
const psuEst = document.getElementById('psuEst');
const compatShort = document.getElementById('compatShort');
const cartList = document.getElementById('cartList');

/* populate selects */
populateSelect(selCpu, CPUS, '-- Choisir un CPU --');
populateSelect(selMb, MOTHERBOARDS, '-- Choisir une carte m√®re --');
populateSelect(selRam, RAMS, '-- Choisir une RAM --');
populateSelect(selGpu, GPUS, '-- Choisir une carte graphique --');

/* update preview when changes */
[selCpu, selMb, selRam, selGpu, selStorage].forEach(el=>el.addEventListener('change', updatePreview));

function updatePreview(){
  const c = findById(CPUS, selCpu.value);
  const m = findById(MOTHERBOARDS, selMb.value);
  const r = findById(RAMS, selRam.value);
  const g = findById(GPUS, selGpu.value);
  const s = (()=>{ const v=selStorage.value; if(!v) return null; if(v==='ssd-500')return {name:'SSD 500GB',price:50,img:'https://via.placeholder.com/160x90?text=SSD+500'}; if(v==='ssd-1t')return {name:'SSD 1TB',price:90,img:'https://via.placeholder.com/160x90?text=SSD+1TB'}; if(v==='hdd-2t')return {name:'HDD 2TB',price:60,img:'https://via.placeholder.com/160x90?text=HDD+2TB'}; })();

  let html='';
  [c,m,r,g,s].forEach(it=>{ if(!it) return; html+=`<div class="component-card"><img src="${it.img}" alt="${it.name}"><div class="component-meta"><div>${it.name}</div><div class="small">${it.brand||''} ${it.socket||it.type||''}</div><div class="price">${it.price?it.price+' ‚Ç¨':''}</div></div></div>`});
  if(!html) html='<p class="small">S√©lectionne des composants.</p>';
  preview.innerHTML = html;

  const totalPrice = (c?.price||0)+(m?.price||0)+(r?.price||0)+(g?.price||0)+(s?.price||0);
  priceSum.textContent = totalPrice + ' ‚Ç¨';
  const tdpCpu = c?.tdp || 35;
  const tdpGpu = g?.tdp || 50;
  const est = Math.ceil((tdpCpu + tdpGpu + 150)/50)*50;
  psuEst.textContent = est + ' W';
  compatShort.innerHTML = '';
}

/* compatibility check */
function verifyAll(){
  messages.innerHTML='';
  const c = findById(CPUS, selCpu.value);
  const m = findById(MOTHERBOARDS, selMb.value);
  const r = findById(RAMS, selRam.value);
  const g = findById(GPUS, selGpu.value);
  if(!c||!m||!r||!g){
    messages.innerHTML = `<div class="result ko">‚ö†Ô∏è Choisis CPU, MB, RAM et GPU.</div>`;
    return;
  }
  let ok = true, html='';
  if(c.socket !== m.socket){
    html += `<div class="result ko">‚ùå Incompatibilit√© : CPU (${c.socket}) ‚â† MB (${m.socket}).</div>`; ok=false;
  } else { html += `<div class="result ok">‚úÖ CPU compatible (${c.socket}).</div>`; }
  if(r.type !== m.ram){
    html += `<div class="result ko">‚ùå RAM (${r.type}) non support√©e par la MB (${m.ram}).</div>`; ok=false;
  } else { html += `<div class="result ok">‚úÖ RAM compatible (${r.type}).</div>`; }
  const chosenPsu = parseInt(document.getElementById('sel-psu')?.value) || 0;
  const estPsu = parseInt(psuEst.textContent) || 0;
  if(chosenPsu && chosenPsu < estPsu){
    html += `<div class="result ko">‚ùå L'alim choisie (${chosenPsu} W) est inf√©rieure √† ${estPsu} W.</div>`; ok=false;
  } else if(chosenPsu) {
    html += `<div class="result ok">‚úÖ Alim OK (${chosenPsu} W).</div>`;
  }
  messages.innerHTML = html;
  compatShort.innerHTML = ok?`<div class="small ok">‚úÖ Configuration valide</div>`:`<div class="small ko">‚ùå Incompatibilit√©s d√©tect√©es</div>`;
}

/* cart demo */
let CART = [];
function addToCart(){
  verifyAll();
  const short = compatShort.textContent || '';
  if(!short.includes('Configuration valide')){
    alert('Impossible d\'ajouter : incompatibilit√©s d√©tect√©es.');
    return;
  }
  const c = findById(CPUS, selCpu.value);
  const m = findById(MOTHERBOARDS, selMb.value);
  const r = findById(RAMS, selRam.value);
  const g = findById(GPUS, selGpu.value);
  const s = selStorage.value ? selStorage.value : null;
  const total = (c?.price||0)+(m?.price||0)+(r?.price||0)+(g?.price||0)+(s? (s==='ssd-500'?50: s==='ssd-1t'?90:60):0);
  CART.push({c,m,r,g,s,total});
  renderCart();
  alert('Configuration ajout√©e (d√©mo). Prix total : ' + total + ' ‚Ç¨');
}
function renderCart(){
  if(CART.length===0){ cartList.innerHTML='<p class="small">Aucun √©l√©ment</p>'; return; }
  cartList.innerHTML = CART.map((it,idx)=>`<div style="padding:8px;border-bottom:1px solid rgba(255,255,255,.04)"><div>${it.c.name} / ${it.g.name}</div><div class="small">${it.total} ‚Ç¨</div></div>`).join('');
}

/* modal open/close */
configBtn.addEventListener('click', ()=>{ configModal.style.display='flex'; updatePreview(); messages.innerHTML=''; compatShort.innerHTML=''; });
closeConfig.addEventListener('click', ()=>{ configModal.style.display='none'; });

/* quick calc */
function quickCalc(){ const comps=Number(document.getElementById('quick-components').value)||0; const hours=Number(document.getElementById('quick-hours').value)||0; const price = comps*12 + hours*18; document.getElementById('quick-result').textContent = price + ' ‚Ç¨'; }

/* pumpkins improved */
function createPumpkin(){ const el=document.createElement('div'); el.className='pumpkin'; el.textContent='üéÉ'; el.style.left=(Math.random()*92)+'vw'; el.style.fontSize=(24+Math.random()*36)+'px'; const dur=(3+Math.random()*4); el.style.animation=`fall ${dur}s linear forwards`; document.body.appendChild(el); setTimeout(()=>el.remove(), (dur+0.5)*1000); }
setInterval(createPumpkin,1200);

/* ============================
   PRIX DU MOMENT (simulation)
   - fetchLivePrices() tente de r√©cup√©rer un endpoint (ex: ton serveur)
   - si pas disponible, on affiche des prix simul√©s
   - instructions pour brancher l'API Amazon dans les commentaires
   ============================ */

const priceBtn = document.getElementById('priceBtn');
const priceModal = document.getElementById('priceModal');
const priceResults = document.getElementById('priceResults');
priceBtn.addEventListener('click', ()=>{ priceModal.style.display='flex'; showSimulatedPrices(); });

function closePrice(){ priceModal.style.display='none'; priceResults.innerHTML=''; }

/* Simulated baseline prices for quick demo */
const SIM_PRICES = {
  'intel-12400': {price:159, url:'https://www.amazon.fr/s?k=intel+12400'},
  'intel-13600k': {price:339, url:'https://www.amazon.fr/s?k=intel+13600k'},
  'amd-5600': {price:139, url:'https://www.amazon.fr/s?k=ryzen+5+5600'},
  'amd-7700x': {price:409, url:'https://www.amazon.fr/s?k=ryzen+7+7700x'},
  'rtx3060': {price:329, url:'https://www.amazon.fr/s?k=rtx+3060'},
  'rtx4070': {price:649, url:'https://www.amazon.fr/s?k=rtx+4070'},
  'rx6600': {price:215, url:'https://www.amazon.fr/s?k=rx+6600'},
  'rx6800': {price:569, url:'https://www.amazon.fr/s?k=rx+6800'}
};

/* Attempt to fetch live prices from a real endpoint:
   - You can create a small server endpoint (e.g. /amazon-prices) that calls Amazon Product Advertising API
   - The browser cannot directly call Amazon PA-API because of secret keys and CORS; do it from a server.
   - Server should return JSON like: { "intel-12400": { "price": 159.99, "url": "https://..." }, ... }

   Example server pseudocode (node/express):
   const express = require('express');
   app.get('/amazon-prices', async (req,res) => {
     // use Amazon PA-API SDK, sign request,
